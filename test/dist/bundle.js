!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});new(n(1).default)(document.querySelector(".typer-js-container"),{text:"\n\tThis is like one of those scenes in a futuristic sci-fi movie where someone is communicating with the main character through an ominous computer screen. And the person is completely unaware of the context or meaning of the message, but then later finds out it was destined to be. \n\t\n\tLike how awesome would it be if I just did something like...\n\n\tMark. You are the chosen one.\n\n\tMeet @ Starbucks later tho?\n\n\tNah just kidding, (sorry if your name is Mark). Anyway, hope you enjoy tinkering around with this!\n\n\t"}).beginTyping()},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),a=s.setIntervalAsync,u=s.clearIntervalAsync,c=function(t,e){var n=this;this.options={text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tempus sagittis dapibus. Fusce lacinia dui tortor, at porttitor quam luctus ut. Aliquam gravida commodo eros ac dictum. Nam ac odio at sem interdum dictum eget sit amet lorem. Vivamus enim velit, condimentum sed neque non, dignissim viverra nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis sodales, neque eget tincidunt efficitur, nisi orci vestibulum diam, eget fringilla dui dolor sed nisi. Pellentesque feugiat augue in felis interdum, non tempus dui volutpat. Sed pulvinar, massa non placerat scelerisque, nunc tellus posuere felis, a ultricies mi libero id velit. Mauris sed arcu dolor. Mauris varius a metus sit amet pulvinar. Proin rhoncus non quam in vulputate. ",variation:.45,wordsPerMinute:40,pauseTimeout:525,pauseOnSpace:!1,pauseOnEndOfSentence:!0,showCaret:!1,glitch:!1,onFinishedTyping:function(){console.log("Finished typing!")}},this.currentIndex=0,this.getWords=function(){return n.options.text.match(/\w+/g)},this.getTypingSpeed=function(){return n.options.text.length/(4.7*n.options.wordsPerMinute)+10},this.updateElementText=function(t){var e=n.element.textContent,i=n.options.text.substring(0,e.length)+t,r=n.options.showCaret?"▮":"";n.element.textContent=i+r},this.stopTyping=function(){return u(n.typingInterval)},this.handleTypingPause=function(){return r(n,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.stopTyping(),[4,this.delay(this.options.pauseTimeout)];case 1:return t.sent(),this.beginTyping(),[2]}}))}))},this.delay=function(t){return new Promise((function(e){setTimeout(e,t)}))},this.applyVariation=function(){return r(n,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Math.floor(this.options.variation*Math.random()*this.getRandomArbitrary(100,500)),[4,this.delay(t)];case 1:return e.sent(),[2]}}))}))},this.insertNextChar=function(){return r(n,void 0,void 0,(function(){var t,e,n,i,r;return o(this,(function(o){switch(o.label){case 0:return t=this.options.text.charAt(this.currentIndex),e=this.options.text.charAt(this.currentIndex+1),n=t.match(/\s/g),i=t.match(/[\.\?\!]/g)&&!e.match(/[\.\?\!]/g)||t.match(/\\n/g),r=this.options.pauseOnSpace&&n||this.options.pauseOnEndOfSentence&&i,this.updateElementText(t),this.options.variation?[4,this.applyVariation()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.currentIndex>=this.options.text.length-1?(this.options.onFinishedTyping&&this.options.onFinishedTyping(),[4,this.stopTyping()]):[3,4];case 3:return o.sent(),[3,6];case 4:return this.currentIndex+=1,r?[4,this.handleTypingPause()]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2]}}))}))},this.getRandomArbitrary=function(t,e){return Math.random()*(e-t)+t},this.applyGlitch=function(){return r(n,void 0,void 0,(function(){var t,e,n,i,r;return o(this,(function(o){switch(o.label){case 0:return t=this.element.textContent,e=this.getRandomArbitrary(1,t.length),n=t.substring(0,e),i=t.substring(e,t.length),r=n+"▮ "+i,this.element.textContent=r,[4,this.delay(this.options.variation*this.getRandomArbitrary(100,200))];case 1:return o.sent(),this.element.textContent=""+n+i,[2]}}))}))},this.beginTyping=function(){var t=n.getTypingSpeed();n.typingInterval=a(n.insertNextChar,t),n.options.glitch&&(n.glitchInterval=a(n.applyGlitch,5e3)),console.log("Beginning to type at "+n.options.wordsPerMinute+" words per minute."),console.log("Typing interval is:",t)},this.element=t,e&&(this.options=i(i({},this.options),e)),this.options.text=this.options.text.trim()};e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=(i=n(3))&&"object"==typeof i&&"default"in i?i.default:i;const o=Math.pow(2,31)-1;function s(){return(s=r((function*(t){t.stopped=!0;for(var e=0,n=Object.values(t.timeouts);e<n.length;e++){const t=n[e];clearTimeout(t)}const i=()=>{},r=Object.values(t.promises).map(t=>{t.catch(i)}),s=setInterval(i,o);yield Promise.all(r),clearInterval(s)}))).apply(this,arguments)}class a extends Error{}Object.defineProperty(a.prototype,"name",{value:"SetIntervalAsyncError"});class u{constructor(){this.stopped=!1,this.id=0,this.timeouts={},this.promises={}}}function c(t,e,n,...i){const o=t.id;t.promises[o]=r((function*(){const r=new Date;try{yield e(...i)}catch(t){console.error(t)}const s=new Date;if(!t.stopped){const a=s-r,u=n>a?n-a:0;t.timeouts[o+1]=setTimeout(c,u,t,e,n,...i)}delete t.timeouts[o],delete t.promises[o]}))(),t.id=o+1}e.SetIntervalAsyncError=a,e.clearIntervalAsync=function(t){return s.apply(this,arguments)},e.setIntervalAsync=function(t,e,...n){!function(t){if("function"!=typeof t)throw new a('Invalid argument: "handler". Expected a function.')}(t),function(t){if(!("number"==typeof t&&10<=t))throw new a('Invalid argument: "interval". Expected a number greater than or equal to 10.')}(e);const i=new u,r=i.id;return i.timeouts[r]=setTimeout(c,e,i,t,e,...n),i}},function(t,e){function n(t,e,n,i,r,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(i,r)}t.exports=function(t){return function(){var e=this,i=arguments;return new Promise((function(r,o){var s=t.apply(e,i);function a(t){n(s,r,o,a,u,"next",t)}function u(t){n(s,r,o,a,u,"throw",t)}a(void 0)}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdGVzdC9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zZXQtaW50ZXJ2YWwtYXN5bmMvZHluYW1pYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dCIsImJlZ2luVHlwaW5nIiwiX19hc3NpZ24iLCJ0aGlzIiwiYXNzaWduIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXBwbHkiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJfYSIsInNldEludGVydmFsQXN5bmMiLCJjbGVhckludGVydmFsQXN5bmMiLCJUaXBlciIsImVsZW1lbnQiLCJvcHRpb25zIiwiX3RoaXMiLCJ2YXJpYXRpb24iLCJ3b3Jkc1Blck1pbnV0ZSIsInBhdXNlVGltZW91dCIsInBhdXNlT25TcGFjZSIsInBhdXNlT25FbmRPZlNlbnRlbmNlIiwic2hvd0NhcmV0IiwiZ2xpdGNoIiwib25GaW5pc2hlZFR5cGluZyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50SW5kZXgiLCJnZXRXb3JkcyIsIm1hdGNoIiwiZ2V0VHlwaW5nU3BlZWQiLCJ1cGRhdGVFbGVtZW50VGV4dCIsImNoYXIiLCJwcmV2aW91c1RleHRDb250ZW50IiwidGV4dENvbnRlbnQiLCJzdWJzdHJpbmciLCJjYXJldCIsInN0b3BUeXBpbmciLCJ0eXBpbmdJbnRlcnZhbCIsImhhbmRsZVR5cGluZ1BhdXNlIiwiZGVsYXkiLCJtcyIsInNldFRpbWVvdXQiLCJhcHBseVZhcmlhdGlvbiIsInRpbWVvdXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRSYW5kb21BcmJpdHJhcnkiLCJpbnNlcnROZXh0Q2hhciIsImN1cnJlbnRDaGFyIiwibmV4dENoYXIiLCJpc1NwYWNlIiwiaXNFbmRPZlNlbnRlbmNlIiwic2hvdWxkUGF1c2UiLCJjaGFyQXQiLCJtaW4iLCJtYXgiLCJhcHBseUdsaXRjaCIsInJhbmRvbUNoYXJQb3NpdGlvbiIsImJlZm9yZUNoYXIiLCJhZnRlckNoYXIiLCJnbGl0Y2hJbnRlcnZhbCIsInRyaW0iLCJkZWZhdWx0IiwiZXgiLCJfYXN5bmNUb0dlbmVyYXRvciIsIk1BWF9JTlRFUlZBTF9NUyIsInBvdyIsIl9jbGVhckludGVydmFsQXN5bmMiLCJ0aW1lciIsInN0b3BwZWQiLCJfaSIsIl9PYmplY3QkdmFsdWVzIiwidmFsdWVzIiwidGltZW91dHMiLCJjbGVhclRpbWVvdXQiLCJub29wIiwicHJvbWlzZXMiLCJtYXAiLCJwcm9taXNlIiwiY2F0Y2giLCJub29wSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImFsbCIsImNsZWFySW50ZXJ2YWwiLCJTZXRJbnRlcnZhbEFzeW5jRXJyb3IiLCJFcnJvciIsIlNldEludGVydmFsQXN5bmNUaW1lciIsImlkIiwidGltZW91dEhhbmRsZXIiLCJoYW5kbGVyIiwiaW50ZXJ2YWwiLCJhcmdzIiwic3RhcnRUaW1lIiwiRGF0ZSIsImVyciIsImVycm9yIiwiZW5kVGltZSIsImV4ZWN1dGlvblRpbWUiLCJfeCIsInZhbGlkYXRlSGFuZGxlciIsInZhbGlkYXRlSW50ZXJ2YWwiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJnZW4iLCJfbmV4dCIsIl90aHJvdyIsImFyZyIsImluZm8iLCJmbiIsInNlbGYiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxD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SSxFQUFNakIsR0FFekIsU0FBU1ksRUFBTXpKLEdBQ2J1SixFQUFtQkMsRUFBS3pILEVBQVNDLEVBQVF5SCxFQUFPQyxFQUFRLE9BQVExSixHQUdsRSxTQUFTMEosRUFBT1YsR0FDZE8sRUFBbUJDLEVBQUt6SCxFQUFTQyxFQUFReUgsRUFBT0MsRUFBUSxRQUFTVixHQUduRVMsT0FBTU0iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFRpcGVyIGZyb20gXCIuLi9saWIvaW5kZXhcIjtcblxubGV0IG9wdGlvbnMgPSB7XG5cdHRleHQ6IGBcblx0VGhpcyBpcyBsaWtlIG9uZSBvZiB0aG9zZSBzY2VuZXMgaW4gYSBmdXR1cmlzdGljIHNjaS1maSBtb3ZpZSB3aGVyZSBzb21lb25lIGlzIGNvbW11bmljYXRpbmcgd2l0aCB0aGUgbWFpbiBjaGFyYWN0ZXIgdGhyb3VnaCBhbiBvbWlub3VzIGNvbXB1dGVyIHNjcmVlbi4gQW5kIHRoZSBwZXJzb24gaXMgY29tcGxldGVseSB1bmF3YXJlIG9mIHRoZSBjb250ZXh0IG9yIG1lYW5pbmcgb2YgdGhlIG1lc3NhZ2UsIGJ1dCB0aGVuIGxhdGVyIGZpbmRzIG91dCBpdCB3YXMgZGVzdGluZWQgdG8gYmUuIFxuXHRcblx0TGlrZSBob3cgYXdlc29tZSB3b3VsZCBpdCBiZSBpZiBJIGp1c3QgZGlkIHNvbWV0aGluZyBsaWtlLi4uXG5cblx0TWFyay4gWW91IGFyZSB0aGUgY2hvc2VuIG9uZS5cblxuXHRNZWV0IEAgU3RhcmJ1Y2tzIGxhdGVyIHRobz9cblxuXHROYWgganVzdCBraWRkaW5nLCAoc29ycnkgaWYgeW91ciBuYW1lIGlzIE1hcmspLiBBbnl3YXksIGhvcGUgeW91IGVuam95IHRpbmtlcmluZyBhcm91bmQgd2l0aCB0aGlzIVxuXG5cdGAsXG59O1xubGV0IHR5cGVyID0gbmV3IFRpcGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHlwZXItanMtY29udGFpbmVyXCIpLCBvcHRpb25zKTtcbnR5cGVyLmJlZ2luVHlwaW5nKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBfYSA9IHJlcXVpcmUoXCJzZXQtaW50ZXJ2YWwtYXN5bmMvZHluYW1pY1wiKSwgc2V0SW50ZXJ2YWxBc3luYyA9IF9hLnNldEludGVydmFsQXN5bmMsIGNsZWFySW50ZXJ2YWxBc3luYyA9IF9hLmNsZWFySW50ZXJ2YWxBc3luYztcbnZhciBUaXBlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUaXBlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHRleHQ6IFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gUGhhc2VsbHVzIHRlbXB1cyBzYWdpdHRpcyBkYXBpYnVzLiBGdXNjZSBsYWNpbmlhIGR1aSB0b3J0b3IsIGF0IHBvcnR0aXRvciBxdWFtIGx1Y3R1cyB1dC4gQWxpcXVhbSBncmF2aWRhIGNvbW1vZG8gZXJvcyBhYyBkaWN0dW0uIE5hbSBhYyBvZGlvIGF0IHNlbSBpbnRlcmR1bSBkaWN0dW0gZWdldCBzaXQgYW1ldCBsb3JlbS4gVml2YW11cyBlbmltIHZlbGl0LCBjb25kaW1lbnR1bSBzZWQgbmVxdWUgbm9uLCBkaWduaXNzaW0gdml2ZXJyYSBudWxsYS4gQ2xhc3MgYXB0ZW50IHRhY2l0aSBzb2Npb3NxdSBhZCBsaXRvcmEgdG9ycXVlbnQgcGVyIGNvbnViaWEgbm9zdHJhLCBwZXIgaW5jZXB0b3MgaGltZW5hZW9zLiBEdWlzIHNvZGFsZXMsIG5lcXVlIGVnZXQgdGluY2lkdW50IGVmZmljaXR1ciwgbmlzaSBvcmNpIHZlc3RpYnVsdW0gZGlhbSwgZWdldCBmcmluZ2lsbGEgZHVpIGRvbG9yIHNlZCBuaXNpLiBQZWxsZW50ZXNxdWUgZmV1Z2lhdCBhdWd1ZSBpbiBmZWxpcyBpbnRlcmR1bSwgbm9uIHRlbXB1cyBkdWkgdm9sdXRwYXQuIFNlZCBwdWx2aW5hciwgbWFzc2Egbm9uIHBsYWNlcmF0IHNjZWxlcmlzcXVlLCBudW5jIHRlbGx1cyBwb3N1ZXJlIGZlbGlzLCBhIHVsdHJpY2llcyBtaSBsaWJlcm8gaWQgdmVsaXQuIE1hdXJpcyBzZWQgYXJjdSBkb2xvci4gTWF1cmlzIHZhcml1cyBhIG1ldHVzIHNpdCBhbWV0IHB1bHZpbmFyLiBQcm9pbiByaG9uY3VzIG5vbiBxdWFtIGluIHZ1bHB1dGF0ZS4gXCIsXG4gICAgICAgICAgICB2YXJpYXRpb246IDAuNDUsXG4gICAgICAgICAgICB3b3Jkc1Blck1pbnV0ZTogNDAsXG4gICAgICAgICAgICBwYXVzZVRpbWVvdXQ6IDUyNSxcbiAgICAgICAgICAgIHBhdXNlT25TcGFjZTogZmFsc2UsXG4gICAgICAgICAgICBwYXVzZU9uRW5kT2ZTZW50ZW5jZTogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dDYXJldDogZmFsc2UsXG4gICAgICAgICAgICBnbGl0Y2g6IGZhbHNlLFxuICAgICAgICAgICAgb25GaW5pc2hlZFR5cGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmluaXNoZWQgdHlwaW5nIVwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5nZXRXb3JkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3b3JkcyA9IF90aGlzLm9wdGlvbnMudGV4dC5tYXRjaCgvXFx3Ky9nKTtcbiAgICAgICAgICAgIHJldHVybiB3b3JkcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRUeXBpbmdTcGVlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtcyA9IF90aGlzLm9wdGlvbnMudGV4dC5sZW5ndGggLyAoX3RoaXMub3B0aW9ucy53b3Jkc1Blck1pbnV0ZSAqIDQuNykgKyAxMDtcbiAgICAgICAgICAgIHJldHVybiBtcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50VGV4dCA9IGZ1bmN0aW9uIChjaGFyKSB7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNUZXh0Q29udGVudCA9IF90aGlzLmVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IF90aGlzLm9wdGlvbnMudGV4dC5zdWJzdHJpbmcoMCwgcHJldmlvdXNUZXh0Q29udGVudC5sZW5ndGgpICsgY2hhcjtcbiAgICAgICAgICAgIHZhciBjYXJldCA9IF90aGlzLm9wdGlvbnMuc2hvd0NhcmV0ID8gXCLilq5cIiA6IFwiXCI7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LnRleHRDb250ZW50ID0gdGV4dCArIGNhcmV0O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3BUeXBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbEFzeW5jKF90aGlzLnR5cGluZ0ludGVydmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVUeXBpbmdQYXVzZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcFR5cGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxheSh0aGlzLm9wdGlvbnMucGF1c2VUaW1lb3V0KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5UeXBpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHRoaXMuZGVsYXkgPSBmdW5jdGlvbiAobXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXBwbHlWYXJpYXRpb24gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGltZW91dDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBNYXRoLmZsb29yKHRoaXMub3B0aW9ucy52YXJpYXRpb24gKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmFuZG9tQXJiaXRyYXJ5KDEwMCwgNTAwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGF5KHRpbWVvdXQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdGhpcy5pbnNlcnROZXh0Q2hhciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hhciwgbmV4dENoYXIsIGlzU3BhY2UsIGlzRW5kT2ZTZW50ZW5jZSwgc2hvdWxkUGF1c2U7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2hhciA9IHRoaXMub3B0aW9ucy50ZXh0LmNoYXJBdCh0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q2hhciA9IHRoaXMub3B0aW9ucy50ZXh0LmNoYXJBdCh0aGlzLmN1cnJlbnRJbmRleCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTcGFjZSA9IGN1cnJlbnRDaGFyLm1hdGNoKC9cXHMvZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0VuZE9mU2VudGVuY2UgPSAoY3VycmVudENoYXIubWF0Y2goL1tcXC5cXD9cXCFdL2cpICYmICFuZXh0Q2hhci5tYXRjaCgvW1xcLlxcP1xcIV0vZykpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXIubWF0Y2goL1xcXFxuL2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkUGF1c2UgPSAodGhpcy5vcHRpb25zLnBhdXNlT25TcGFjZSAmJiBpc1NwYWNlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLm9wdGlvbnMucGF1c2VPbkVuZE9mU2VudGVuY2UgJiYgaXNFbmRPZlNlbnRlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudFRleHQoY3VycmVudENoYXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudmFyaWF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYXBwbHlWYXJpYXRpb24oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5jdXJyZW50SW5kZXggPj0gdGhpcy5vcHRpb25zLnRleHQubGVuZ3RoIC0gMSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vbkZpbmlzaGVkVHlwaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkZpbmlzaGVkVHlwaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN0b3BUeXBpbmcoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaG91bGRQYXVzZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmhhbmRsZVR5cGluZ1BhdXNlKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdGhpcy5nZXRSYW5kb21BcmJpdHJhcnkgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXBwbHlHbGl0Y2ggPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCwgcmFuZG9tQ2hhclBvc2l0aW9uLCBiZWZvcmVDaGFyLCBhZnRlckNoYXIsIGdsaXRjaDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5kb21DaGFyUG9zaXRpb24gPSB0aGlzLmdldFJhbmRvbUFyYml0cmFyeSgxLCB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVDaGFyID0gdGV4dC5zdWJzdHJpbmcoMCwgcmFuZG9tQ2hhclBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyQ2hhciA9IHRleHQuc3Vic3RyaW5nKHJhbmRvbUNoYXJQb3NpdGlvbiwgdGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2xpdGNoID0gYmVmb3JlQ2hhciArIFwiXFx1MjVBRSBcIiArIGFmdGVyQ2hhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IGdsaXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsYXkodGhpcy5vcHRpb25zLnZhcmlhdGlvbiAqIHRoaXMuZ2V0UmFuZG9tQXJiaXRyYXJ5KDEwMCwgMjAwKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiICsgYmVmb3JlQ2hhciArIGFmdGVyQ2hhcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHRoaXMuYmVnaW5UeXBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbXMgPSBfdGhpcy5nZXRUeXBpbmdTcGVlZCgpO1xuICAgICAgICAgICAgX3RoaXMudHlwaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbEFzeW5jKF90aGlzLmluc2VydE5leHRDaGFyLCBtcyk7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5nbGl0Y2gpXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2xpdGNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbEFzeW5jKF90aGlzLmFwcGx5R2xpdGNoLCA1MDAwKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQmVnaW5uaW5nIHRvIHR5cGUgYXQgXCIgKyBfdGhpcy5vcHRpb25zLndvcmRzUGVyTWludXRlICsgXCIgd29yZHMgcGVyIG1pbnV0ZS5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlR5cGluZyBpbnRlcnZhbCBpczpcIiwgbXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICBpZiAob3B0aW9ucylcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnRleHQgPSB0aGlzLm9wdGlvbnMudGV4dC50cmltKCk7XG4gICAgfVxuICAgIHJldHVybiBUaXBlcjtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBUaXBlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChleCkgeyByZXR1cm4gKGV4ICYmICh0eXBlb2YgZXggPT09ICdvYmplY3QnKSAmJiAnZGVmYXVsdCcgaW4gZXgpID8gZXhbJ2RlZmF1bHQnXSA6IGV4OyB9XG5cbnZhciBfYXN5bmNUb0dlbmVyYXRvciA9IF9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3InKSk7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IEVtaWxpbyBBbG1hbnNpLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyB3b3JrIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBGb3IgYSBjb3B5LCBzZWUgdGhlIGZpbGUgTElDRU5TRSBpbiB0aGUgcm9vdCBkaXJlY3RvcnkuXG4gKi9cbmNvbnN0IE1BWF9JTlRFUlZBTF9NUyA9IE1hdGgucG93KDIsIDMxKSAtIDE7XG4vKipcbiAqIFN0b3BzIGFuIGV4ZWN1dGlvbiBjeWNsZSBzdGFydGVkIGJ5IHNldEludGVydmFsQXN5bmMuPGJyPlxuICogQW55IG9uZ29pbmcgZnVuY3Rpb24gZXhlY3V0aW9ucyB3aWxsIHJ1biB1bnRpbCBjb21wbGV0aW9uLFxuICogYnV0IGFsbCBmdXR1cmUgb25lcyB3aWxsIGJlIGNhbmNlbGxlZC5cbiAqXG4gKiBAcGFyYW0ge1NldEludGVydmFsQXN5bmNUaW1lcn0gdGltZXJcbiAqIEByZXR1cm5zIHtQcm9taXNlfVxuICogICAgICAgICAgQSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyBoYXZlIGZpbmlzaGVkLlxuICovXG5cbmZ1bmN0aW9uIGNsZWFySW50ZXJ2YWxBc3luYyhfeCkge1xuICByZXR1cm4gX2NsZWFySW50ZXJ2YWxBc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfY2xlYXJJbnRlcnZhbEFzeW5jKCkge1xuICBfY2xlYXJJbnRlcnZhbEFzeW5jID0gX2FzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qICh0aW1lcikge1xuICAgIHRpbWVyLnN0b3BwZWQgPSB0cnVlO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JHZhbHVlcyA9IE9iamVjdC52YWx1ZXModGltZXIudGltZW91dHMpOyBfaSA8IF9PYmplY3QkdmFsdWVzLmxlbmd0aDsgX2krKykge1xuICAgICAgY29uc3QgdGltZW91dCA9IF9PYmplY3QkdmFsdWVzW19pXTtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB9XG5cbiAgICBjb25zdCBub29wID0gKCkgPT4ge307XG5cbiAgICBjb25zdCBwcm9taXNlcyA9IE9iamVjdC52YWx1ZXModGltZXIucHJvbWlzZXMpLm1hcChwcm9taXNlID0+IHtcbiAgICAgIHByb21pc2UuY2F0Y2gobm9vcCk7XG4gICAgfSk7XG4gICAgY29uc3Qgbm9vcEludGVydmFsID0gc2V0SW50ZXJ2YWwobm9vcCwgTUFYX0lOVEVSVkFMX01TKTtcbiAgICB5aWVsZCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgY2xlYXJJbnRlcnZhbChub29wSW50ZXJ2YWwpO1xuICB9KTtcbiAgcmV0dXJuIF9jbGVhckludGVydmFsQXN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgRW1pbGlvIEFsbWFuc2kuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIHdvcmsgaXMgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgbGljZW5zZS5cbiAqIEZvciBhIGNvcHksIHNlZSB0aGUgZmlsZSBMSUNFTlNFIGluIHRoZSByb290IGRpcmVjdG9yeS5cbiAqL1xuXG4vKipcbiAqIEVycm9yIHRocm93biBieSBzZXRJbnRlcnZhbEFzeW5jIHdoZW4gaW52YWxpZCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLlxuICovXG5jbGFzcyBTZXRJbnRlcnZhbEFzeW5jRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0SW50ZXJ2YWxBc3luY0Vycm9yLnByb3RvdHlwZSwgJ25hbWUnLCB7XG4gIHZhbHVlOiAnU2V0SW50ZXJ2YWxBc3luY0Vycm9yJ1xufSk7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IEVtaWxpbyBBbG1hbnNpLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyB3b3JrIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBGb3IgYSBjb3B5LCBzZWUgdGhlIGZpbGUgTElDRU5TRSBpbiB0aGUgcm9vdCBkaXJlY3RvcnkuXG4gKi9cbmNvbnN0IE1JTl9JTlRFUlZBTF9NUyA9IDEwO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgLSBIYW5kbGVyIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGluIGludGVydmFscy48YnI+XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF5IGJlIGFzeW5jaHJvbm91cy5cbiAqL1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUhhbmRsZXIoaGFuZGxlcikge1xuICBpZiAoISh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICB0aHJvdyBuZXcgU2V0SW50ZXJ2YWxBc3luY0Vycm9yKCdJbnZhbGlkIGFyZ3VtZW50OiBcImhhbmRsZXJcIi4gRXhwZWN0ZWQgYSBmdW5jdGlvbi4nKTtcbiAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcnZhbCAtIEludGVydmFsIGluIG1pbGxpc2Vjb25kcy4gTXVzdCBiZSBhdCBsZWFzdCAxMCBtcy5cbiAqL1xuXG5mdW5jdGlvbiB2YWxpZGF0ZUludGVydmFsKGludGVydmFsKSB7XG4gIGlmICghKHR5cGVvZiBpbnRlcnZhbCA9PT0gJ251bWJlcicgJiYgTUlOX0lOVEVSVkFMX01TIDw9IGludGVydmFsKSkge1xuICAgIHRocm93IG5ldyBTZXRJbnRlcnZhbEFzeW5jRXJyb3IoYEludmFsaWQgYXJndW1lbnQ6IFwiaW50ZXJ2YWxcIi4gRXhwZWN0ZWQgYSBudW1iZXIgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7TUlOX0lOVEVSVkFMX01TfS5gKTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBFbWlsaW8gQWxtYW5zaS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgd29yayBpcyBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBsaWNlbnNlLlxuICogRm9yIGEgY29weSwgc2VlIHRoZSBmaWxlIExJQ0VOU0UgaW4gdGhlIHJvb3QgZGlyZWN0b3J5LlxuICovXG5cbi8qKlxuICogVGltZXIgb2JqZWN0IHJldHVybmVkIGJ5IHNldEludGVydmFsQXN5bmMuPGJyPlxuICogQ2FuIGJlIHVzZWQgdG9nZXRoZXIgd2l0aCB7QGxpbmsgY2xlYXJJbnRlcnZhbEFzeW5jfSB0byBzdG9wIGV4ZWN1dGlvbi5cbiAqL1xuY2xhc3MgU2V0SW50ZXJ2YWxBc3luY1RpbWVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgdGhpcy5pZCA9IDA7XG4gICAgdGhpcy50aW1lb3V0cyA9IHt9O1xuICAgIHRoaXMucHJvbWlzZXMgPSB7fTtcbiAgfVxuXG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZXhlY3V0ZSB0aGUgZ2l2ZW4gaGFuZGxlciBhdCByZWd1bGFyIGludGVydmFscywgd2hpbGUgcHJldmVudGluZzxicj5cbiAqIG11bHRpcGxlIGNvbmN1cnJlbnQgZXhlY3V0aW9ucy4gVGhlIGhhbmRsZXIgd2lsbCBuZXZlciBiZSBleGVjdXRlZCBjb25jdXJyZW50bHk8YnI+XG4gKiBtb3JlIHRoYW4gb25jZSBpbiBhbnkgZ2l2ZW4gbW9tZW50LiBJZiB0aGUgcnVubmluZyB0aW1lIG9mIGFueSBleGVjdXRpb24gZXhjZWVkczxicj5cbiAqIHRoZSBkZXNpcmVkIGludGVydmFsLCB0aGUgZm9sbG93aW5nIGV4ZWN1dGlvbiB3aWxsIGJlIHNjaGVkdWxlZCBhcyBzb29uIGFzPGJyPlxuICogcG9zc2libGU7IGllLiBpbW1lZGlhdGVseSBhZnRlciB0aGUgcHJldmlvdXMgZXhlY3V0aW9uIGNvbmNsdWRlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyIC0gSGFuZGxlciBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBpbiBpbnRlcnZhbHMuPGJyPlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1heSBiZSBhc3luY2hyb25vdXMuXG4gKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWwgLSBJbnRlcnZhbCBpbiBtaWxsaXNlY29uZHMuIE11c3QgYmUgYXQgbGVhc3QgMTAgbXMuXG4gKiBAcGFyYW0gey4uLip9IGFyZ3MgLSBBbnkgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwYXNzIG9uIHRvIHRoZSBoYW5kbGVyLlxuICogQHJldHVybnMge1NldEludGVydmFsQXN5bmNUaW1lcn1cbiAqICAgICAgICAgIEEgdGltZXIgb2JqZWN0IHdoaWNoIGNhbiBiZSB1c2VkIHRvIHN0b3AgZXhlY3V0aW9uIHdpdGgge0BsaW5rIGNsZWFySW50ZXJ2YWxBc3luY30uXG4gKlxuICogQGFsaWFzIFtEeW5hbWljXSBzZXRJbnRlcnZhbEFzeW5jXG4gKi9cblxuZnVuY3Rpb24gc2V0SW50ZXJ2YWxBc3luYyhoYW5kbGVyLCBpbnRlcnZhbCwgLi4uYXJncykge1xuICB2YWxpZGF0ZUhhbmRsZXIoaGFuZGxlcik7XG4gIHZhbGlkYXRlSW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICBjb25zdCB0aW1lciA9IG5ldyBTZXRJbnRlcnZhbEFzeW5jVGltZXIoKTtcbiAgY29uc3QgaWQgPSB0aW1lci5pZDtcbiAgdGltZXIudGltZW91dHNbaWRdID0gc2V0VGltZW91dCh0aW1lb3V0SGFuZGxlciwgaW50ZXJ2YWwsIHRpbWVyLCBoYW5kbGVyLCBpbnRlcnZhbCwgLi4uYXJncyk7XG4gIHJldHVybiB0aW1lcjtcbn1cblxuZnVuY3Rpb24gdGltZW91dEhhbmRsZXIodGltZXIsIGhhbmRsZXIsIGludGVydmFsLCAuLi5hcmdzKSB7XG4gIGNvbnN0IGlkID0gdGltZXIuaWQ7XG4gIHRpbWVyLnByb21pc2VzW2lkXSA9IF9hc3luY1RvR2VuZXJhdG9yKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcblxuICAgIHRyeSB7XG4gICAgICB5aWVsZCBoYW5kbGVyKC4uLmFyZ3MpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgaWYgKCF0aW1lci5zdG9wcGVkKSB7XG4gICAgICBjb25zdCBleGVjdXRpb25UaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSBpbnRlcnZhbCA+IGV4ZWN1dGlvblRpbWUgPyBpbnRlcnZhbCAtIGV4ZWN1dGlvblRpbWUgOiAwO1xuICAgICAgdGltZXIudGltZW91dHNbaWQgKyAxXSA9IHNldFRpbWVvdXQodGltZW91dEhhbmRsZXIsIHRpbWVvdXQsIHRpbWVyLCBoYW5kbGVyLCBpbnRlcnZhbCwgLi4uYXJncyk7XG4gICAgfVxuXG4gICAgZGVsZXRlIHRpbWVyLnRpbWVvdXRzW2lkXTtcbiAgICBkZWxldGUgdGltZXIucHJvbWlzZXNbaWRdO1xuICB9KSgpO1xuICB0aW1lci5pZCA9IGlkICsgMTtcbn1cblxuZXhwb3J0cy5TZXRJbnRlcnZhbEFzeW5jRXJyb3IgPSBTZXRJbnRlcnZhbEFzeW5jRXJyb3I7XG5leHBvcnRzLmNsZWFySW50ZXJ2YWxBc3luYyA9IGNsZWFySW50ZXJ2YWxBc3luYztcbmV4cG9ydHMuc2V0SW50ZXJ2YWxBc3luYyA9IHNldEludGVydmFsQXN5bmM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyJdLCJzb3VyY2VSb290IjoiIn0=